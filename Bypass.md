\*\*"우회"\*\*는 보안 취약점을 이용하는 방법 중 하나로, 보안 시스템이나 검증 절차를 **우회**하여 **제한을 넘어선 공격**을 가능하게 만드는 기술입니다. 쉽게 말해, **보안 필터링이나 검증 절차**를 통과하기 위한 **대체 방법**을 사용하는 것이죠.

### 1. **우회(Bypass)란?**

우회란, **시스템이 의도한 보안 조치나 필터링 기능을 피해서 공격을 실행하는 방법**을 의미합니다. 예를 들어, 특정 문자열이나 코드가 필터링되거나 변환되는 상황에서, **그 필터링이나 변환을 회피하기 위한 방법**을 찾는 것을 의미합니다.

### 2. **"SCRIPT가 문자열 치환이 되면 우회를 시도해볼 수 있다"는 의미**

여기서 **SCRIPT**는 **JavaScript의 `<script>` 태그**를 의미하고, \*\*"문자열 치환"\*\*은 특정 문자열을 다른 문자열로 바꾸는 것을 말합니다. 보통 보안 시스템에서는 `<script>` 태그나 특정 JavaScript 코드를 **필터링**하여 XSS(교차 사이트 스크립팅) 공격을 막으려고 합니다.

* **문자열 치환**은 예를 들어, `<script>`가 `<scr1pt>`로 바뀌거나, `'`(작은따옴표)가 `%27`로 바뀌는 방식입니다. 이런 방식으로 공격을 **무력화**하려고 하는 것입니다.

이때 **우회**를 시도하는 이유는, 문자열 치환 방식이 완벽하지 않거나, 공격자가 다른 방식으로 `<script>` 태그를 삽입할 수 있는 방법을 찾을 수 있기 때문입니다.

### 3. **우회 기법 예시**

공격자가 `XSS` 취약점을 우회하기 위해 사용할 수 있는 몇 가지 방법을 소개합니다.

#### (1) **문자열 인코딩 우회**

서버가 **특정 문자열을 치환**하거나 **필터링**한다면, 공격자는 그 문자열을 인코딩하여 우회할 수 있습니다.

* 예를 들어, `<script>` 태그가 `%3Cscript%3E`로 인코딩되어 필터를 우회할 수 있습니다.

#### (2) **태그 변경 우회**

만약 `<script>`가 필터링된다면, **태그의 이름을 변경**하거나 다른 태그를 사용하여 우회할 수 있습니다.

* 예: `<sc%72ipt>`나 `<img src="javascript:alert(1)">`

#### (3) **이벤트 핸들러 우회**

HTML 태그의 **이벤트 핸들러**(예: `onerror`, `onclick`, `onload`)를 이용하여 **JavaScript 코드**를 실행할 수 있습니다. 예를 들어:

* `<img src="x" onerror="alert(1)">` 처럼 `onerror` 이벤트를 사용하여 **XSS** 공격을 시도할 수 있습니다.

#### (4) **공백 및 특수문자 우회**

필터링을 피하기 위해 공백 문자나 특수 문자를 **이용하여** 치환을 우회할 수 있습니다. 예를 들어:

* `eval` 함수의 우회 방법으로, `eval`을 `e v a l`처럼 공백을 넣어서 우회할 수 있습니다.

#### (5) **HTML 속성 우회**

HTML 속성 안에 JavaScript 코드가 삽입되는 형태를 이용할 수 있습니다. 예를 들어:

* `<img src="x" onerror="javascript:alert(1)">`

### 4. **우회 시도 이유**

**웹 애플리케이션 방어**는 **일반적으로 필터링**을 기반으로 하여 특정 **악성 코드**나 태그를 **차단**하는 방식으로 이루어집니다. 하지만 **보안 필터**는 **완벽하지 않기** 때문에, 공격자는 **다양한 우회 기법**을 통해 이러한 필터링을 피할 수 있습니다. 우회 공격을 통해 **XSS**나 **CSRF**와 같은 취약점을 악용할 수 있습니다.

### 5. **우회 시도 예시**

* **필터링된 문자열**: `<script>` 태그가 `<scr1pt>`로 바뀐다면, 공격자는 `<scr1pt>`를 우회하기 위해 `eval()`이나 `onerror`와 같은 이벤트 핸들러를 사용하거나, 다른 JavaScript 코드를 삽입할 수 있습니다.

* **HTML Entity Encoding**: 예를 들어, `<`는 `&lt;`로 변환되고, `>`는 `&gt;`로 변환되는데, 이런 HTML 엔터티 인코딩을 사용하면 필터를 우회할 수 있습니다.

---

### 6. **우회 방어 방법**

1. **정교한 입력 검증**:

   * 입력값을 **엄격하게 검증**하여 **악성 코드**나 스크립트 태그를 원천적으로 차단합니다.
   * HTML 특수 문자(예: `<`, `>`, `&`, `'`, `"`)는 **엔터티로 변환**하여 출력해야 합니다.

2. **출력 인코딩**:

   * **출력되는 데이터**에서 특수 문자를 인코딩하여 HTML이나 JavaScript로 해석되지 않도록 합니다.
   * 예를 들어, `&lt;script&gt;`로 처리하여 실제 `<script>`로 변환되지 않도록 합니다.

3. **Content Security Policy (CSP)**:

   * **CSP**를 사용하여 **외부 스크립트 실행**을 제한하거나, 스크립트가 **정해진 도메인**에서만 실행되도록 제한할 수 있습니다.

4. **XSS 필터링**:

   * HTML, JavaScript, URL 등을 **모든 사용자 입력에서 필터링**하여 악성 스크립트 삽입을 막습니다.

---

### 결론

**우회**는 보안 필터링 시스템을 피하거나 우회하는 기술로, 취약점이 존재할 때 필터링을 피하거나 **다른 방법으로 공격을 성공시키기 위한 기법**입니다. 예를 들어, **`<script>` 태그가 치환된다면**, 필터를 우회하기 위해 **인코딩**, **이벤트 핸들러**, **HTML 엔터티** 등을 사용할 수 있습니다.

우회 기법을 **방어하려면** 입력 검증과 출력 인코딩 등을 철저하게 하여, 악성 코드를 서버나 클라이언트 측에서 실행되지 않도록 해야 합니다.
